name: CD Build

on:
    push:
        tags:
            - "*"

jobs:
    Publish:
        runs-on: windows-latest
        steps:
            - uses: actions/checkout@v3
              with:
                  submodules: "true"
            - name: Setup .NET
              uses: actions/setup-dotnet@v2
            - name: Setup NUKE
              run: dotnet tool install Nuke.GlobalTool --global
            - name: Push to NuGet
              run: nuke PushToNuGet --configuration Release --msbuild-properties ContinuousIntegrationBuild=true SilkEnableSourceLink=true --feature-sets Android iOS --nuget-api-key ${{ secrets.NUGET_TOKEN }}
